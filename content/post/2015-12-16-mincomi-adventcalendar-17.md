---
title: バリバリバリデーションエラー
author: Keiji Ariyama
type: post
date: 2015-12-16T14:45:33+00:00
url: /2015/12/mincomi-adventcalendar-17.html
categories:
  - Android
  - みんコミ Advent Calendar

---
----
**[「みんなのコミック」は2018年10月31日を持ちまして更新を終了いたしました。](https://twitter.com/mincomi_jp/status/1057847395889737730)**
----

## はじめに

この記事は「[みんコミ Advent Calendar][1]」の１７日目の記事です。

※ 12月18日追記
  
　この不具合は、現在は修正されています。

現在、「[みんコミ][2]」に次のようなお知らせが掲載されています。

    現在、みんなのコミックの会員登録システムに不具合があり、会員登録画面に記入後の確認画面への遷移ができなくなっております。
    皆様にはご迷惑をおかけし、大変申し訳ございません。
    
    Twitter、Facebookを利用した、ログインにつきましては正常に動作しております。
    
    原因については現在対処中です。正常に動作する状況になりましたら、お知らせにて告知させていただきます。
    

「調査中」ではなく「対処中」と言うことはすでに原因は判明していると言うことですが、不具合と聞けばとりあえず調べてみようというのがエンジニアの性（さが）というものです。

<!--more-->

* * *

「みんコミ」のユーザー登録手順は次の通りです。

  1. ユーザーは、メールアドレスを入力・みんコミに送信する
  2. みんコミサーバーは、ユーザーに確認メールを送信する
  3. ユーザーは、確認メールに記載されているURLから登録ページを開き、必要な情報を入力して「登録ボタン」を押す
  4. みんコミサーバーは、登録確認画面を表示する（？）
  5. ユーザーは、「確認ボタン」を押して登録を完了する（？）

（僕はTwitter連携で使っているので、４と５については想像です。）

さて、さっそく試してみたところ、１から３までは滞りなく進みます。

お知らせにあるとおり、４の確認画面のところで、ボタンを押しても画面が変わらなくなりました。いや、一瞬何かのダイアログの枠のようなものは出るのですが、すぐに消えてしまいます。

開発者ツールからログを見ると、次のようなエラーが出ていました。

<div id="attachment_932" style="max-width: 1107px" class="wp-caption aligncenter">
  <a href="https://blog.keiji.dev/wp-content/uploads/2015/12/Screen-Shot-2015-12-16-at-23.28.05.png"><img src="https://blog.keiji.dev/wp-content/uploads/2015/12/Screen-Shot-2015-12-16-at-23.28.05.png" alt="faceIconURLのパラメーターがないのでバリデーションにかかっている" width="1097" height="242" class="size-full wp-image-932" /></a>
  
  <p class="wp-caption-text">
    faceIconURLのパラメーターがないのでバリデーションにかかっている
  </p>
</div>

`faceIconUrl`のパラメーターがサーバー側で必須項目になっていて、ユーザー登録の際にそのパラメーターを送っていないのでバリデーション（必須入力項目や入力形式が正しいかを検証すること）エラーが発生しています。

`faceIconUrl`という名称から、プロフィール画像のURLの事だと推測しますが、ユーザー登録の際にはそのようなパラメーターの指定はありません。

おそらく何らかのきっかけで、本来通るべきユーザー登録のバリデーション処理でなく、プロフィール編集のバリデーション処理に渡ってしまっているのではないでしょうか。

ちなみにこのバリデーション。エラーが起きた場合は通常、次のように該当箇所にエラーが表示されます。

[<img src="https://blog.keiji.dev/wp-content/uploads/2015/12/Screen-Shot-2015-12-16-at-23.25.05.png" alt="Screen Shot 2015-12-16 at 23.25.05" width="1345" height="138" class="aligncenter size-full wp-image-933" />][3]

しかし今回の場合、faceIconUrlに該当する入力項目が画面上に存在しないので、ただ確認画面が表示されないだけに見えてしまうのだと思います。

つらつら書きましたが、僕はサーバーについては全くわからないので、的外れな推測であれば申し訳ないと、今のうちに謝っておきます。

* * *

    「有山圭二」は「みんなのコミック」及び運営の「株式会社イーブックイニシアティブジャパン」とは一切関係がありません。
    また、本アドベントカレンダーの内容はあくまで参加者個人の見解です。
    「みんなのコミック」の評価を目的とするものではありませんので、ご了承下さい。
    

* * *

[みんコミ][4]といえば、僕が普段からお世話になっている根雪れい（@neyuki_rei）さんも連載していますね。

<blockquote class="twitter-tweet" lang="ja">
  <p lang="ja" dir="ltr">
    10歳になったおかあさんと僕の生活をマンガにしましたよ～。見てくださいね ！　<a href="https://t.co/UfxCfaOYRZ">https://t.co/UfxCfaOYRZ</a>　 <a href="https://twitter.com/hashtag/%E3%81%BF%E3%82%93%E3%82%B3%E3%83%9F?src=hash">#みんコミ</a> <a href="https://twitter.com/hashtag/%E3%81%BF%E3%82%93%E3%81%AA%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%82%AF?src=hash">#みんなのコミック</a> <a href="https://t.co/2nHBnFus4n">pic.twitter.com/2nHBnFus4n</a>
  </p>
  
  <p>
    — 根雪れい.おかあさん(10)と僕。連載中 (@neyuki_rei)
  </p>
  
  <p>
    <a href="https://twitter.com/neyuki_rei/status/664369017038110720">2015, 11月 11</a>
  </p>
</blockquote>

根雪さんの「おかあさん(10)と僕。」は、いよいよ今日が更新日です。
  
ちょっと早いですがアドベントカレンダーを更新してしまって、僕は「おかあさん(10)と僕。」を読んできます。

それでは明日18日の担当は、サーバーサイドを触るのはだいたい年一回の「有山圭二」さんです。

よろしくお願いします。

 [1]: http://qiita.com/advent-calendar/2015/mincomi
 [2]: https://www.mincomi.jp/
 [3]: https://blog.keiji.dev/wp-content/uploads/2015/12/Screen-Shot-2015-12-16-at-23.25.05.png
 [4]: https://www.mincomi.jp