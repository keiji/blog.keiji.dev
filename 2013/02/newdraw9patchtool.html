<!doctype html><html lang=ja><head><meta charset=utf-8><title>新しい"Draw 9-patch Tool"を公開しました。</title>
<meta name=description content="Don't take your glasses off."><script async src="https://www.googletagmanager.com/gtag/js?id=G-RTC3ZY943S"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-RTC3ZY943S")</script><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://blog.keiji.dev/index.xml title=めがねをかけるんだ><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.keiji.dev/images/logo.png"><meta name=twitter:title content='新しい"Draw 9-patch Tool"を公開しました。'><meta name=twitter:description content="最近、「有山さんはもうMakersの方に行っちゃったんだね。Androidはもうやってないんだよね」「いやいや、もちろんやってますよ。Android」と言う会話があったので。
Android SDKに同梱されている”Draw 9-patch Tool“を、SWTをベースにリライトして、Eclipseのプラグインにしたので公開します。
このプラグインを使えば、開発者は、Eclipseの中だけで9-patch画像の作成や編集が出来ます。 これまでは、Facebook/Twitter/Google+で、知り合い向けに公開していたのですが、もう少し公開範囲を広げることにしました。
開発してまだ日が浅いので、Windows/Mac/Linuxの違い、Eclipseのバージョンの違いなどによって、不具合がある可能性があります。
不具合を見つけた方は、是非ともフィードバックしてください。
フィードバックは、Facebook/Twitter/Google+、その他どんな手段でも構いません。宜しくお願いいたします。
ダウンロード＆利用方法 draw9patch tool for Eclipse plugin (MD5: 09b952ceea11d9d59984ad5d004b422d)
https://github.com/keiji/draw9patch2/blob/master/bin/Draw9PatchPlugin.zip
zipを展開して、pluginsの中の”Draw9PatchEditor_*.jar”を、お使いのEclipseのpluginsディレクトリにコピーして下さい（Eclipseの再起動が必要です）。
Eclipseの再起動後、パッケージエクスプローラーから、pngファイル(e.g. “res/drawable-hdpi/ic_launcher.png”)をダブルクリックすると、”Draw 9-patch Tool”が起動します。
この画像中のモザイクは、
Pixelmatorで処理しました。 "><link rel=stylesheet href=https://blog.keiji.dev/fontawesome/css/all.min.css><link crossorigin=anonymous href=https://blog.keiji.dev/css/styles.min.css integrity rel="preload stylesheet" as=style><link rel=stylesheet href=https://blog.keiji.dev/css/default.css><link id=dark-mode-theme crossorigin=anonymous href=https://blog.keiji.dev/css/dark.min.css integrity rel="preload stylesheet" as=style><script>var darkTheme=document.getElementById("dark-mode-theme"),storedTheme=localStorage.getItem("dark-mode-storage");storedTheme==="dark"?darkTheme.disabled=!1:storedTheme==="light"&&(darkTheme.disabled=!0)</script><script defer crossorigin=anonymous src=https://blog.keiji.dev/js/theme.js integrity></script><script defer crossorigin=anonymous src=https://blog.keiji.dev/js/instantpage.min.js integrity></script><meta name=generator content="Hugo 0.133.0"></head><body><header><nav class=navbar><div class=nav><a href=https://blog.keiji.dev/ class=nav-logo><img src=https://blog.keiji.dev/images/logo.png width height alt=Logo></a><ul class=nav-links><li><a href=https://blog.keiji.dev/profile/ id=Profile><em class="fas fa-user fa-lg"></em></a></li><li><a href=https://blog.keiji.dev/licenses/ id=Licenses><em class="fab fa-osi fa-lg"></em></a></li></ul></div></nav><div class=intro-header><div class=container><div class=post-heading><h1>新しい"Draw 9-patch Tool"を公開しました。</h1><span class=meta-post><em class="fa fa-calendar-alt"></em>&nbsp;2013-02-10
&nbsp;&nbsp;&nbsp;<em class="fa fa-folder-open"></em>&nbsp;
<a href=https://blog.keiji.dev/categories/android/>Android</a>&nbsp;
<a href=https://blog.keiji.dev/categories/aosp/>AOSP</a>&nbsp;
<a href=https://blog.keiji.dev/categories/%E7%BF%92%E4%BD%9C/>習作</a>&nbsp;</span></div></div></div></header><div class=container role=main><article class=article class=blog-post><p>最近、「有山さんはもう<strong>Makers</strong>の方に行っちゃったんだね。Androidはもうやってないんだよね」「いやいや、もちろんやってますよ。<strong>Android</strong>」と言う会話があったので。</p><p>Android SDKに同梱されている”<strong>Draw 9-patch Tool</strong>“を、SWTをベースにリライトして、Eclipseのプラグインにしたので公開します。</p><div style=text-align:center><p><span style=text-decoration:underline>このプラグインを使えば、開発者は、Eclipseの中だけで9-patch画像の作成や編集が出来ます。</span></p></div><div><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.43.04-PM.jpg><img class="wp-image-53 aligncenter" alt="Screen Shot 2013-02-10 at 3.43.04 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.43.04-PM.jpg width=442 height=260></a></div><p>これまでは、Facebook/Twitter/Google+で、知り合い向けに公開していたのですが、もう少し公開範囲を広げることにしました。</p><p><em id=__mceDel>開発してまだ日が浅いので、Windows/Mac/Linuxの違い、Eclipseのバージョンの違いなどによって、不具合がある可能性があります。<br>不具合を見つけた方は、是非ともフィードバックしてください。</em></p><p>フィードバックは、<a href=http://www.facebook.com/keiji.ariyama target=_blank>Facebook</a>/Twitter/<a href="https://plus.google.com/101075618639637989227?authuser=0" target=_blank>Google+</a>、その他どんな手段でも構いません。宜しくお願いいたします。</p><h2 id=ダウンロード利用方法>ダウンロード＆利用方法</h2><p><strong>draw9patch tool for Eclipse plugin <span>(MD5: 09b952ceea11d9d59984ad5d004b422d)</span></strong></p><p><a href=https://github.com/keiji/draw9patch2/blob/master/bin/Draw9PatchPlugin.zip>https://github.com/keiji/draw9patch2/blob/master/bin/Draw9PatchPlugin.zip</a></p><p>zipを展開して、pluginsの中の”Draw9PatchEditor_*.jar”を、お使いのEclipseのpluginsディレクトリにコピーして下さい（Eclipseの再起動が必要です）。</p><p>Eclipseの再起動後、パッケージエクスプローラーから、pngファイル(<em>e.g. “res/drawable-hdpi/ic_launcher.png”</em>)をダブルクリックすると、”Draw 9-patch Tool”が起動します。</p><table cellspacing=0 cellpadding=0 align=center><tr><td><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-4.00.32-PM.jpg><img class="wp-image-60 aligncenter" alt="Screen Shot 2013-02-10 at 4.00.32 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-4.00.32-PM.jpg width=450 height=273></a></td></tr><tr><td style=text-align:center><span>この画像中のモザイクは、<br>Pixelmatorで処理しました。</span></td></tr></table><h2 id=9-patchとは>9-patchとは？</h2><p>皆さんご存じの通り、Androidは、様々な解像度の端末にアプリを配信することになります。したがって、アプリで表示する画像は、解像度を決めうちで作ることは推奨されていません（参考: <strong><a href=http://developer.android.com/tools/help/draw9patch.html target=_blank>Android Developers: Draw 9-patch</a>)</strong></p><p>しかし、小さな画像を拡大して表示するときに、全体を引き延ばすと、画像自体がぼやけてしまいます。</p><div><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.53.34-PM.png><img class="aligncenter wp-image-61" alt="Screen Shot 2013-02-10 at 3.53.34 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.53.34-PM.png width=139 height=316></a></div><p>そのため、引き延ばす範囲をあらかじめ設定しておくと、Androidは、指定した範囲を引き延ばして表示します。</p><p>この、引き延ばす範囲を指定する作業を「パッチを当てる」と、言い、”Draw 9-patch Tool”はそのためにあります。</p><div><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.47.17-PM.jpg><img class="aligncenter wp-image-62" alt="Screen Shot 2013-02-10 at 3.47.17 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.47.17-PM.jpg width=346 height=203></a></div><p>また、画像の上に文字を表示する場合など、どの部分に文字を載せたいのか（パディング）を設定することも出来ます（右側青色部分）。</p><p>パッチとパディングは、画像の一番外側に黒いドットを置いて設定します。</p><p>パッチをパディングを設定したファイルは、実体はpng画像のデータです。拡張子を”.9.png”とすることで、Androidは、その画像が”9-patched”であると認識します。</p><h2 id=現在のdraw-9-patch-tool>現在のDraw 9-patch Tool</h2><p>現在、Android SDKに同梱のDraw 9-patchツールは、スタンドアローンのアプリケーションとして動作します。</p><div><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.48.51-PM.jpg><img class="aligncenter wp-image-63" alt="Screen Shot 2013-02-10 at 3.48.51 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.48.51-PM.jpg width=346 height=203></a></div><p>AWT&amp;Swingベースで開発されており、現在のEclipseプラグイン”ADT(Android Development Tools)”には取り込まれていません。そのため、開発者は、Eclipseだけで作業を完結することが出来ませんでした。</p><p>また、このツールには、いくつかの不具合が報告されていますが、Android登場から6年間、ほとんど改善されていません。</p><table cellspacing=0 cellpadding=0 align=center><tr><td><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.34.01-PM.jpg><img class="aligncenter wp-image-64" alt="Screen Shot 2013-02-10 at 3.34.01 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.34.01-PM.jpg width=346 height=203></a></td></tr><tr><td style=text-align:center>不具合の1つ。<br>画像の読み込み直後に中央に表示されない</td></tr></table><p>僕もいくつか不具合修正のパッチを作成して、AOSP(Android Open Source Project)にサブミットしたことがあります。</p><p>しかし、現在の設計は、クラスの分割が十分でなく、またテストケースが用意されていないために大きな変更に踏み切れず。根本的な解決には至りませんでした。</p><p>Google I/Oで、開発ツールの担当であるTor Norbyeと、Xavier Ducrohetに会ったときに、”<strong>Draw 9-patch toolは誰がメンテナンスしているの？</strong>“と、聞いたことがあります。</p><p>その答えは、”<strong>Nobody knows…</strong>“でした。</p><h2 id=新しいdraw-9-patch-tool>新しいDraw 9-patch Tool</h2><p>今回、新しい”Draw 9-patch Tool”は、SWT(Standard Widget Toolkit)ベースで開発しています。</p><div><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.43.54-PM.png><img class="aligncenter wp-image-65" alt="Screen Shot 2013-02-10 at 3.43.54 PM" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-3.43.54-PM.png width=346 height=202></a></div><p>これまで と同様、スタンドアローンで動作するのに加えて、SWTベースなので、Eclipseのプラグインにも比較的容易に移植できました。</p><table cellspacing=0 cellpadding=0 align=center><tr><td><a href=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-4.00.32-PM-1.jpg><img class="aligncenter wp-image-66" alt="Screen Shot 2013-02-10 at 4.00.32 PM (1)" src=https://blog.keiji.dev/wp-content/uploads/2013/02/Screen-Shot-2013-02-10-at-4.00.32-PM-1.jpg width=346 height=210></a></td></tr><tr><td style=text-align:center><span>この画像中のモザイクは、<br>Pixelmatorで処理しました。</span></td></tr></table><p>プラグイン化することで、開発者は、Eclipseの中だけでパッチやパディングを設定した画像の作成や編集をすることが出来ます。</p><p>現在の”Draw 9-patch Tool”の不具合は、知りうる限り、全て修正してあります。</p><p>また、クラス分割の徹底と、JUnitのテストケースを用意することで、コード変更への強度を高めました。</p><p>新しいDraw 9-patchのコードは、現在、AOSPへサブミットしてレビュー待ちの状態です。これがもしAOSPに取り込まれれば、正式なAndroid開発ツールとして、開発者の皆さんのお手元に届くかもしれません。</p><p>しかし、繰り返しになりますが、開発してまだ日が浅いツールなので、Windows/Mac/Linuxの違い、Eclipseのバージョンの違いなどによって、不具合がある可能性があります。</p><p>不具合を見つけた方は、是非ともフィードバックしてください。</p><p>フィードバックは、<a href=http://www.facebook.com/keiji.ariyama target=_blank>Facebook</a>/Twitter/<a href="https://plus.google.com/101075618639637989227?authuser=0" target=_blank>Google+</a>、その他どんな手段でも構いません。宜しくお願いいたします。</p><div></div></article></div><footer><div class=social-icons></div><div class=container><p class="credits copyright"><a href=https://blog.keiji.dev/about></a>&nbsp;&copy;
2025
&nbsp;/&nbsp;
<a href=https://blog.keiji.dev/>めがねをかけるんだ</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p><p class="credits theme-by">Powered By <a href=https://gohugo.io>Hugo</a>&nbsp;
Theme
<a href=https://github.com/matsuyoshi30/harbor>Harbor</a></p></div></footer></body></html>