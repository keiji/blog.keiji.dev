<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
<title>矩形切り出しツール「Region Cropper」を公開しました</title>


  
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-62351683-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-62351683-1');
  </script>
  


<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="alternate" type="application/rss+xml" href="https://blog.keiji.dev/index.xml" title="めがねをかけるんだ">

<link id="dark-mode-theme" rel="stylesheet" href="https://blog.keiji.dev/css/dark.css" />
<link rel="stylesheet" href="https://blog.keiji.dev/fontawesome/css/all.min.css" />


<script src="https://blog.keiji.dev/js/bundle.js"></script>
<script src="https://blog.keiji.dev/js/instantpage.js" type="module" defer></script>
<meta name="generator" content="Hugo 0.77.0" />
  </head>
  <body>
    
  




  <header>
    <nav class="navbar">
  <div class="nav">
    
      <a href="https://blog.keiji.dev/" class="nav-logo">
      <img src="https://blog.keiji.dev/images/logo.png"
           width=""
           height=""
           alt="Logo">
      </a>
    

    <ul class="nav-links">
      
        
          <li><a href="https://blog.keiji.dev/profile/" name="Profile"><i class="fas fa-user fa-lg"></i></a></li>
        
      
        
          <li><a href="https://blog.keiji.dev/licenses/" name="Licenses"><i class="fab fa-osi fa-lg"></i></a></li>
        
      
    </ul>
  </div>
</nav>

    <div class="intro-header">
      <div class="container">
        <div class="post-heading">
          
            <h1>矩形切り出しツール「Region Cropper」を公開しました</h1>
          
          
            <span class="meta-post">
  <i class="fa fa-calendar-alt"></i>&nbsp;2016-09-15
  
    &nbsp;&nbsp;&nbsp;<i class="fa fa-folder-open"></i>&nbsp;
    
      <a href="https://blog.keiji.dev//categories/tensorflow/">TensorFlow</a>&nbsp;
    
      <a href="https://blog.keiji.dev//categories/%E7%BF%92%E4%BD%9C/">習作</a>&nbsp;
    
      <a href="https://blog.keiji.dev//categories/%E9%9B%91%E8%A8%98/">雑記</a>&nbsp;
    
  
</span>

          
        </div>
      </div>
    </div>
  </header>


    
  <div class="container" role="main">
    <article class="article" class="blog-post">
      
    <p>時間を見つけてはTensorFlow関係のあれこれをちまちま続けています。</p>
<p>先日は「<a href="https://www.pasonatech.co.jp/skill_up/event/naniwa_tech.jsp">なにわTECH道</a>」で、TensorFlowを使ったイラスト顔検出について発表しました。</p>
<h2 id="データセットの作成">データセットの作成</h2>
<p>これまで、機械学習に使う画像（データセット）の作成にはMacの「プレビュー」を使っていました。</p>
<p>１枚ずつ画像を読み込んでクロッピング（トリミング）していたのですが、１枚の画像に複数の顔があるときや、あとで領域を微調整（特に領域を拡大）したいときが面倒でした。</p>
<p>良さそうなツールがないか、少しばかり探してみたのですが、僕の思い描くような操作性のものがありませんでした。</p>
<p>なければ作れば良い。</p>
<p>そんなわけで、自分で画像の切り出しツールツール「Region Cropper」を開発しました。</p>
<p>１人で使うのももったいないので、GitHubで公開します。</p>
<h2 id="region-cropper">Region Cropper</h2>
<p>GitHub: <a href="https://github.com/keiji/region_cropper">https://github.com/keiji/region_cropper</a></p>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/set_region.png" alt="set_region" width="2048" height="1580" class="aligncenter size-full wp-image-1383" /></p>
<p>GUIのフレームワークに、使い慣れたSwingではなくJava FXを使いました。</p>
<p>そのため、Java 8のUpdate40以降でしかきちんと動きません。</p>
<p>以下、Region CropperのREADME.mdから。</p>
<hr>
<h1 id="region-cropper-1">Region Cropper</h1>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Java &gt; 1.8.0_40</li>
</ul>
<h2 id="download">Download</h2>
<p>Binary(Zip): <a href="https://github.com/keiji/region_cropper">https://github.com/keiji/region_cropper</a></p>
<h2 id="使い方usage">使い方（Usage）</h2>
<pre><code>$ java -jar region_cropper_main.jar
</code></pre>
<h3 id="処理するディレクトリの選択select-directory">処理するディレクトリの選択（Select Directory）</h3>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/select_directory.png" alt="select_directory" width="1424" height="896" class="aligncenter size-full wp-image-1382" /></p>
<h3 id="領域の追加add">領域の追加（Add)</h3>
<p>ドラッグ&amp;ドロップで領域を設定します。</p>
<h3 id="領域の選択select">領域の選択（Select)</h3>
<p>現在選択中の領域は赤枠で示されます。</p>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/set_region.png" alt="set_region" width="2048" height="1580" class="aligncenter size-full wp-image-1383" /></p>
<p>スペース（Space）キーを押すと、選択中の領域以外の場所がグレーアウトされます。</p>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/focus_region.png" alt="focus_region" width="2048" height="1580" class="aligncenter size-full wp-image-1384" /></p>
<table>
<thead>
<tr>
<th style="text-align:left">キー</th>
<th style="text-align:left">動作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Enter</td>
<td style="text-align:left">次の領域へ移動。最後の領域であれば次のファイルを表示</td>
</tr>
<tr>
<td style="text-align:left">Shift + Enter</td>
<td style="text-align:left">前の領域へ移動。最初の領域であれば前のファイルを表示</td>
</tr>
<tr>
<td style="text-align:left">Tab</td>
<td style="text-align:left">次の領域へ移動</td>
</tr>
<tr>
<td style="text-align:left">Shift + Tab</td>
<td style="text-align:left">前の領域へ移動</td>
</tr>
<tr>
<td style="text-align:left">End</td>
<td style="text-align:left">次のファイルを表示</td>
</tr>
<tr>
<td style="text-align:left">Home</td>
<td style="text-align:left">前のファイルを表示</td>
</tr>
</tbody>
</table>
<h3 id="領域の編集edit">領域の編集（Edit）</h3>
<table>
<thead>
<tr>
<th style="text-align:left">キー</th>
<th style="text-align:left">動作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">方向(←↑→↓)</td>
<td style="text-align:left">領域を移動</td>
</tr>
<tr>
<td style="text-align:left">Alt または Option + 方向(←↑→↓)</td>
<td style="text-align:left">領域を「拡大（Expand）」</td>
</tr>
<tr>
<td style="text-align:left">Windows または Command + 方向(←↑→↓)</td>
<td style="text-align:left">領域を「縮小（Shrink）」</td>
</tr>
<tr>
<td style="text-align:left">削除（Delete）</td>
<td style="text-align:left">領域を「削除（Delete）」</td>
</tr>
</tbody>
</table>
<p>Shift を押すと、変化量が小さくなり微調整できます。</p>
<h3 id="ラベルの設定label">ラベルの設定（Label）</h3>
<p>数字キーの「0〜9」を押すと、選択した領域にラベルを設定します。</p>
<p>追加した領域のラベルは、標準で 1 が設定されています。</p>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/set_label.png" alt="set_label" width="2048" height="1580" class="aligncenter size-full wp-image-1387" /></p>
<p>また、ラベル 0 は負例として特別な意味を持ちます。</p>
<p>負例に設定した領域は、編集や削除ができません。</p>
<h3 id="領域の切り出しcrop">領域の切り出し（Crop）</h3>
<p>領域の切り出しには「Quick crop」と「Crop to…」の２つの方法があります。</p>
<p><img src="https://blog.keiji.dev/wp-content/uploads/2016/09/menu_crop.png" alt="menu_crop" width="639" height="327" class="aligncenter size-full wp-image-1386" /></p>
<p>「Quick crop」を選択すると、設定している領域を、処理中の画像と同じディレクトリに切り出します。</p>
<p>出力先のディレクトリを設定したい場合は「Crop to…」を選択します。</p>
<pre><code>[出力先のディレクトリ]/label-[ラベル]/[画像名]-[領域番号].png
</code></pre>


      
    </article>
    
    
      
      
</div>

    <footer>
  

  <div class="container">
    <p class="credits copyright">
      <a href="https://blog.keiji.dev/about"></a>
      &nbsp;&copy;
      2020
      
      &nbsp;/&nbsp;
      <a href="https://blog.keiji.dev/">めがねをかけるんだ</a>
      
      &nbsp;&ndash;&nbsp;
      <i class="fas fa-moon" id="dark-mode-toggle"></i>

    <p class="credits theme-by">
      Powered By <a href="https://gohugo.io">Hugo</a>&nbsp;
      Theme
      <a href="https://github.com/matsuyoshi30/harbor">Harbor</a>
    </p>
    </p>
  </div>
</footer>

  </body>
</html>
